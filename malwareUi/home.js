var txtName = "";
var imgPath = "";
var turn = 0;
function collect() {
  var txt = document.getElementById("imgfile").value.replace(/.*[\/\\]/, "");
  var test = document.getElementById("imgfile");
  test.style.color = "white";
  txtName = txt;
}
function make() {
  document.getElementsByClassName("welcome")[0].style.display = "none";
  document.getElementsByClassName("box")[0].style.display = "flex";
}
function processMarkov() {
  turn = 1;
  console.log("input done");
  setTimeout(someFunction, 1000);
}
// function processMarkov() {
//   turn = 1;
//   setTimeout(someFunction, 1000);
// }

// function processPe() {
//   turn = 2;
//   setTimeout(someFunction, 1000);
// }
function someFunction() {
  const stuff = document.getElementsByClassName("damn")[0];
  console.log("first function");
  stuff.style.display = "flex";
  setTimeout(some1Function, 6000);
}
function some1Function() {
  console.log("second function");
  const stuff = document.getElementsByClassName("damn")[0];
  stuff.style.display = "none";
  imgPath = txtName;
  imgPath += turn;
  console.log(imgPath);
  postData();
}
function refresh() {
  location.reload();
}
function another() {
  window.location.href = "./analysis.html";
}
function changeAgain() {
  window.location.href = "./dataset.html";
}

function postData() {
  $.ajax({
    url: "http://127.0.0.1:5000/",
    type: "POST",
    crossDomain: true,
    data: {
      name: imgPath,
    },
    success: function (response) {
      console.log("this is from the api", response);
      if (response != "other") {
        txtName = "Model Prediction : " + response;
      } else {
        txtName = response + "is a benign";
      }
      // document.getElementById("theImage").src = "images\\image1.png";
      document.getElementById("change").innerHTML = txtName;
    },
    error: function (response) {
      console.log(response);
    },
  });
}
